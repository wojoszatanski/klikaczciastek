<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
  <title>Klikacz Ciastek - V8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Klikacz Ciastek - gra przeglƒÖdarkowa, w kt√≥rej pieczesz ciastka, kupujesz ulepszenia i zdobywasz osiƒÖgniƒôcia. Klikaj, aby zdobywaƒá ciastka i rozwijaƒá swojƒÖ piekarniƒô!"/>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comfortaa&display=swap');

  body {
    font-family: 'Comfortaa', cursive, Arial, sans-serif;
    background: url('https://wallpapercave.com/wp/wp7667538.jpg') no-repeat center center fixed;
    background-size: cover;
    text-align: center;
    color: #fff8dc;
    position: relative;
    min-height: 100vh;
    user-select: none;
  }

  h1 {
    font-weight: 900;
    font-size: 2.8rem;
    margin-bottom: 40px;
    color: #f5dba7;
    text-shadow: 1px 1px 5px #000;
  }

  #cookieBtn {
    font-size: 72px;
    background: radial-gradient(circle at center, #f9d976 0%, #f39c12 80%);
    border-radius: 50%;
    border: 6px solid #d68f00;
    box-shadow: 0 6px 10px rgba(0,0,0,0.5), inset 0 4px 6px #fdf5d1;
    width: 130px;
    height: 130px;
    line-height: 130px;
    user-select: none;
    transition: transform 0.1s ease;
    margin: 25px 0;
    cursor: pointer;
  }
  #cookieBtn:active {
    transform: scale(0.92);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3), inset 0 3px 4px #fcebbd;
  }

  #stats {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    background: rgba(255, 229, 113, 0.85);
    padding: 12px 20px;
    border-radius: 15px;
    box-shadow: inset 0 0 12px #f7d558aa;
    color: #5d3a00;
  }

  #menus {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    margin-top: 15px;
    flex-wrap: wrap;
  }

  .menu {
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 2px 10px #dbb857aa;
    border-radius: 15px;
    padding: 15px;
    flex: 1 1 45%;
    max-height: 440px;
    overflow-y: auto;
    color: #5d3a00;
  }
  .menu h2 {
    margin-top: 0;
    color: #b97800;
    text-shadow: 1px 1px 0 #fff1b5;
  }

  .upgrade-item {
    background: #fbe88f;
    border-radius: 12px;
    padding: 10px 12px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: inset 0 0 8px #f7d558aa;
  }

  .upgrade-item span {
    font-weight: 600;
    font-size: 15px;
  }

  .upgrade-item button {
    background: linear-gradient(145deg, #e6b800, #c89200);
    border: none;
    color: #fff;
    font-weight: 700;
    border-radius: 10px;
    padding: 8px 16px;
    box-shadow: 0 4px #996f00;
    cursor: pointer;
    transition: background 0.3s ease;
    min-width: 100px;
    font-size: 14px;
  }
  .upgrade-item button:hover:not(:disabled) {
    background: linear-gradient(145deg, #ffd93b, #e6b800);
  }
  .upgrade-item button:disabled {
    background: #bfbfbf;
    box-shadow: none;
    cursor: not-allowed;
    color: #666;
  }

  #achievements {
    margin-top: 30px;
    background: rgba(215, 240, 212, 0.85);
    border: 2px solid #4caf50cc;
    border-radius: 15px;
    padding: 15px;
    max-height: 180px;
    overflow-y: auto;
    text-align: left;
    color: #2e7d32;
    font-weight: 700;
  }
  #achievements h2 {
    margin-top: 0;
    text-shadow: 1px 1px 0 #b2fab4;
  }
  .achievement {
    padding: 6px 8px;
    border-bottom: 1px solid #a5d6a7;
    font-weight: 700;
    color: #4caf50aa;
  }
  .achievement.unlocked {
    color: #1b5e20;
  }

  .flying-cookie {
    position: absolute;
    font-size: 28px;
    font-weight: 700;
    color: #b77e00;
    text-shadow: 1px 1px 1px #fff6b3;
    pointer-events: none;
    user-select: none;
    animation: flyUp 1.5s forwards ease-out;
    z-index: 1000;
  }

  @keyframes flyUp {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-120px) scale(0.6);
    }
  }

  .auto-cookie {
    position: absolute;
    font-size: 16px;
    pointer-events: none;
    user-select: none;
    transition: transform 1s ease-out, opacity 1s ease-out;
    opacity: 1;
    transform: translate(0, 0) scale(1);
    z-index: 999;
  }

  #eventBox {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #f7b500dd;
    color: white;
    padding: 14px 28px;
    border-radius: 25px;
    font-weight: 900;
    font-size: 20px;
    box-shadow: 0 5px 10px #c17a00cc;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
    max-width: 90vw;
    z-index: 2000;
  }
  #eventBox.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* Scrollbar dla menu ulepsze≈Ñ */
  .menu::-webkit-scrollbar {
    width: 8px;
  }
  .menu::-webkit-scrollbar-thumb {
    background: #c49200cc;
    border-radius: 4px;
  }
  .menu::-webkit-scrollbar-track {
    background: #fff5b6cc;
  }
  #achievements::-webkit-scrollbar {
  width: 8px;
  }
  #achievements::-webkit-scrollbar-thumb {
    background: #1b5e20cc;
    border-radius: 4px;
  }
  #achievements::-webkit-scrollbar-track {
    background: #a5d6a7cc;
  }

  #settingsMenu {
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    z-index: 1000;
  }

  #settingsMenu label {
    margin-right: 8px;
  }

  #settingsMenu input[type="range"] {
    vertical-align: middle;
  }

  #settingsMenu button {
    margin-left: 10px;
    background: linear-gradient(145deg, #e6b800, #c89200);
    box-shadow: 0 4px #996f00;
    border: none;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  #settingsMenu button:hover {
    background: linear-gradient(145deg, #ffd93b, #e6b800);
  }
</style>
</head>
<body>
  <audio id="backgroundMusic" src="piosenka.flac" autoplay loop></audio>
  <audio id="clickSound" src="click.mp3"></audio>
  <audio id="buySound" src="buy.mp3"></audio>

  <div id="settingsMenu">
    <label for="volumeControl">G≈Ço≈õno≈õƒá:</label>
    <input id="volumeControl" type="range" min="0" max="1" step="0.1" value="1" />
    <button id="muteButton">Wycisz muzykƒô</button>
    <p>Ye - WW3</p>
  </div>

  <h1>Klikacz Ciastek - V8</h1>
  <h2 id="bakeryName" style="cursor: pointer; color: #fff8dc; text-shadow: 1px 1px 3px #000;">Piekarnia <span id="bakeryOwner"></span></h2>
  <button id="cookieBtn" title="Kliknij, aby zdobyƒá ciastko!">üç™</button>
  <div id="stats">
    Ciastka: <span id="count">0</span><br />
    Ciastka na sekundƒô: <span id="cps">0</span><br />
    Ciastka za klikniƒôcie: <span id="clickValue">1</span><br />
    Mno≈ºnik eventowy: <span id="multiplier">1x</span><br />
    Ciastka upieczone w sesji: <span id="sessionCount">0</span><br />
    Czas gry: <span id="playTime">0s</span>
  </div>

  <div id="menus">
    <div id="upgrades" class="menu">
      <h2>Ulepszenia Produkcji</h2>
    </div>

    <div id="cursorUpgrades" class="menu">
      <h2>Ulepszenia Klikniƒôƒá</h2>
    </div>
  </div>

  <div id="achievements">
    <h2>OsiƒÖgniƒôcia</h2>
    <div id="achievementsList"></div>
  </div>

  <div id="eventBox"></div>

<script>
  // --- Zmienne podstawowe ---
  let count = 0;
  let cps = 0;
  let clickValue = 1;
  let eventMultiplier = 1;
  let eventActive = false;
  let accumulatedCookies = 0; // Nowa zmienna do ≈õledzenia ciastek na sekundƒô
  let playTimeSeconds = 0;


  // --- Nowy licznik ciastek upieczonych w sesji ---
  let cookiesBakedThisAscension = 0;

  // --- Referencje do element√≥w ---
  const cookieBtn = document.getElementById('cookieBtn');
  const countEl = document.getElementById('count');
  const cpsEl = document.getElementById('cps');
  const clickValueEl = document.getElementById('clickValue');
  const multiplierEl = document.getElementById('multiplier');
  const sessionCountEl = document.getElementById('sessionCount');
  const bakeryNameEl = document.getElementById('bakeryName');
  const bakeryOwnerEl = document.getElementById('bakeryOwner');
  const playTimeEl = document.getElementById('playTime');
  const backgroundMusic = document.getElementById('backgroundMusic');
  const volumeControl = document.getElementById('volumeControl');
  volumeControl.value = 1; // Ustaw domy≈õlnƒÖ g≈Ço≈õno≈õƒá na 100%
  const muteButton = document.getElementById('muteButton');
  const clickSound = document.getElementById('clickSound');

  cookieBtn.addEventListener('click', () => {
      clickSound.currentTime = 0; // Resetuj d≈∫wiƒôk, aby mo≈ºna by≈Ço go odtworzyƒá wielokrotnie
      clickSound.play();
    });

  // --- Ulepszenia produkcji ---
  const upgrades = [
    { id: 'cursor', name: 'Kursor', cost: 15, cps: 0.1, count: 0 },
    { id: 'grandma', name: 'Babcia', cost: 100, cps: 1, count: 0 },
    { id: 'farm', name: 'Farm', cost: 1100, cps: 8, count: 0 },
    { id: 'factory', name: 'Fabryka', cost: 12000, cps: 47, count: 0 },
    { id: 'bank', name: 'Bank', cost: 130000, cps: 260, count: 0 },
    { id: 'temple', name: '≈öwiƒÖtynia', cost: 1400000, cps: 1400, count: 0 },
    { id: 'wizardTower', name: 'Wie≈ºa czarodzieja', cost: 20000000, cps: 7800, count: 0 },
    { id: 'shipment', name: 'Przesy≈Çka', cost: 330000000, cps: 44000, count: 0 },
    { id: 'alchemyLab', name: 'Laboratorium alchemiczne', cost: 5100000000, cps: 260000, count: 0 },
    { id: 'portal', name: 'Portal', cost: 75000000000, cps: 1600000, count: 0 }
  ];

  // --- Ulepszenia klikniƒôƒá ---
  const cursorUpgrades = [
    { id: 'fingerStrength', name: 'Si≈Ça palca', cost: 100, clickValue: 1, count: 0 },
    { id: 'doubleFinger', name: 'Podw√≥jny palec', cost: 1000, clickValue: 5, count: 0 },
    { id: 'thirdFinger', name: 'Trzeci palec', cost: 15000, clickValue: 10, count: 0 }
  ];

  // --- OsiƒÖgniƒôcia ---
  const achievements = [
    { id: 'firstCookie', name: 'Pierwsze ciastko', condition: () => count >= 1, unlocked: false },
    { id: 'clickMaster', name: 'Mistrz klikniƒôƒá', condition: () => clickValue >= 10, unlocked: false },
    { id: 'cookieTycoon', name: 'Ciastkowy magnat', condition: () => count >= 1000, unlocked: false },
    // Nowe osiƒÖgniƒôcia "Bake X cookies in one ascension" - sesji:
    { id: 'wakeAndBake', name: 'Obud≈∫ siƒô i piecz', condition: () => cookiesBakedThisAscension >= 1, unlocked: false },
    { id: 'makingSomeDough', name: 'Trochƒô ciasta', condition: () => cookiesBakedThisAscension >= 1e3, unlocked: false },
    { id: 'soBakedRightNow', name: 'Totalnie upieczony', condition: () => cookiesBakedThisAscension >= 1e5, unlocked: false },
    { id: 'fledglingBakery', name: 'M≈Çoda piekarnia', condition: () => cookiesBakedThisAscension >= 1e6, unlocked: false },
    { id: 'affluentBakery', name: 'Bogata piekarnia', condition: () => cookiesBakedThisAscension >= 1e8, unlocked: false },
    { id: 'worldFamousBakery', name: '≈öwiatowej s≈Çawy piekarnia', condition: () => cookiesBakedThisAscension >= 1e9, unlocked: false },
    { id: 'cosmicBakery', name: 'Kosmiczna piekarnia', condition: () => cookiesBakedThisAscension >= 1e11, unlocked: false },
    { id: 'galacticBakery', name: 'Galaktyczna piekarnia', condition: () => cookiesBakedThisAscension >= 1e12, unlocked: false },
    { id: 'universalBakery', name: 'Uniwersalna piekarnia', condition: () => cookiesBakedThisAscension >= 1e14, unlocked: false },
    { id: 'timelessBakery', name: 'Ponadczasowa piekarnia', condition: () => cookiesBakedThisAscension >= 1e15, unlocked: false },
    { id: 'infiniteBakery', name: 'Niesko≈Ñczona piekarnia', condition: () => cookiesBakedThisAscension >= 1e17, unlocked: false },
    { id: 'immortalBakery', name: 'Nie≈õmiertelna piekarnia', condition: () => cookiesBakedThisAscension >= 1e18, unlocked: false },
    { id: 'dontStopMeNow', name: 'Nie zatrzymasz mnie', condition: () => cookiesBakedThisAscension >= 1e20, unlocked: false },
    { id: 'youCanStopNow', name: 'Mo≈ºesz przestaƒá', condition: () => cookiesBakedThisAscension >= 1e21, unlocked: false },
    { id: 'cookiesAllTheWayDown', name: 'Ciasteczka wszƒôdzie', condition: () => cookiesBakedThisAscension >= 1e23, unlocked: false },
    { id: 'overdose', name: 'Przedawkowanie', condition: () => cookiesBakedThisAscension >= 1e24, unlocked: false }
  ];

  // --- Wy≈õwietlanie ulepsze≈Ñ ---
  const upgradesDiv = document.getElementById('upgrades');
  const cursorUpgradesDiv = document.getElementById('cursorUpgrades');

  function formatNumber(num) {
    if (num >= 1e9) return (num / 1e9).toFixed(2) + " mld";
    if (num >= 1e6) return (num / 1e6).toFixed(2) + " mln";
    if (num >= 1e3) return (num / 1e3).toFixed(2) + " tys.";
    return Math.floor(num);
  }

  function createUpgradeItem(upgrade, container, type) {
    const div = document.createElement('div');
    div.className = 'upgrade-item';
    const span = document.createElement('span');
    if (type === 'production') {
      span.textContent = `${upgrade.name} (x${upgrade.count}) - ${upgrade.cps.toFixed(1)} cps - koszt: ${formatNumber(upgrade.cost)} ciastek`;
    } else if (type === 'click') {
      span.textContent = `${upgrade.name} (x${upgrade.count}) - +${upgrade.clickValue} za klik - koszt: ${formatNumber(upgrade.cost)} ciastek`;
    }
    const btn = document.createElement('button');
    btn.textContent = 'Kup';
    btn.disabled = count < upgrade.cost;
    btn.addEventListener('click', () => {
      if (count >= upgrade.cost) {
        count -= upgrade.cost;
        if(type === 'production') {
          upgrade.count++;
          cps += upgrade.cps;
          upgrade.cost = Math.ceil(upgrade.cost * 1.2);
        } else if(type === 'click') {
          upgrade.count++;
          clickValue += upgrade.clickValue;
          upgrade.cost = Math.ceil(upgrade.cost * 2.5);
        }
        updateDisplay();
        renderUpgrades();
        checkAchievements();
      }
    });
    div.appendChild(span);
    div.appendChild(btn);
    container.appendChild(div);
  }

  function renderUpgrades() {
    upgradesDiv.innerHTML = '<h2>Ulepszenia Produkcji</h2>';
    upgrades.forEach(upg => createUpgradeItem(upg, upgradesDiv, 'production'));

    cursorUpgradesDiv.innerHTML = '<h2>Ulepszenia Klikniƒôƒá</h2>';
    cursorUpgrades.forEach(upg => createUpgradeItem(upg, cursorUpgradesDiv, 'click'));
  }

  // --- Obs≈Çuga klikniƒôcia ciasteczka ---
  cookieBtn.addEventListener('click', e => {
    count += clickValue;
    cookiesBakedThisAscension += clickValue;
    createFlyingCookie(e.clientX, e.clientY);
    updateDisplay();
    checkAchievements();
  });

  // --- Dodawanie ciastek na sekundƒô ---
  function addCookiesPerSecond() {
    const amount = (cps * eventMultiplier) / 10;
    count += amount;
    cookiesBakedThisAscension += amount;
    accumulatedCookies += amount; // Akumuluj ciastka dla animacji
    updateDisplay();
    checkAchievements();
  }

  // --- Nowa funkcja do animacji automatycznych ciastek ---
  function createAutoCookieAnimation(numCookies) {
    const buttonRect = cookieBtn.getBoundingClientRect();
    const centerX = buttonRect.left + buttonRect.width / 2;
    const centerY = buttonRect.top + buttonRect.height / 2;

    for (let i = 0; i < numCookies; i++) {
      const angle = Math.random() * Math.PI * 2;
      const distance = Math.random() * 50 + 50;
      const deltaX = Math.cos(angle) * distance;
      const deltaY = Math.sin(angle) * distance;

      const cookie = document.createElement('div');
      cookie.className = 'auto-cookie';
      cookie.style.left = `${centerX}px`;
      cookie.style.top = `${centerY}px`;
      cookie.textContent = 'üç™';
      
      document.body.appendChild(cookie);

      requestAnimationFrame(() => {
        cookie.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(0.5)`;
        cookie.style.opacity = '0';
      });

      setTimeout(() => cookie.remove(), 1000);
    }
  }

  // --- Nowy interwa≈Ç do animacji ciastek ---
  setInterval(() => {
    if (accumulatedCookies >= 1) {
      const cookieCount = Math.min(Math.round(accumulatedCookies), 100);
      createAutoCookieAnimation(cookieCount);
      accumulatedCookies = 0;
    }
  }, 1000);


  // --- Aktualizacja wy≈õwietlanych warto≈õci ---
  function updateDisplay() {
    countEl.textContent = formatNumber(count);
    cpsEl.textContent = (cps * eventMultiplier).toFixed(1);
    clickValueEl.textContent = formatNumber(clickValue);
    multiplierEl.textContent = eventMultiplier.toFixed(2) + "x";
    sessionCountEl.textContent = formatNumber(cookiesBakedThisAscension);
    updateButtons();
    playTimeEl.textContent = formatPlayTime(playTimeSeconds);
  }

  function formatPlayTime(seconds) {
    const h = Math.floor(seconds / 3600);
    const m = Math.floor((seconds % 3600) / 60);
    const s = seconds % 60;
    return `${h > 0 ? h + 'h ' : ''}${m > 0 ? m + 'm ' : ''}${s}s`;
  }

  function updateButtons() {
    upgrades.forEach(upg => {
      const buttons = upgradesDiv.querySelectorAll('button');
      buttons.forEach(btn => {
        if(btn.previousSibling.textContent.includes(upg.name)) {
          btn.disabled = count < upg.cost;
        }
      });
    });
    cursorUpgrades.forEach(upg => {
      const buttons = cursorUpgradesDiv.querySelectorAll('button');
      buttons.forEach(btn => {
        if(btn.previousSibling.textContent.includes(upg.name)) {
          btn.disabled = count < upg.cost;
        }
      });
    });
  }

  // --- Tworzenie animacji "latajƒÖcego" ciasteczka ---
  function createFlyingCookie(x, y) {
    const span = document.createElement('span');
    span.className = 'flying-cookie';
    span.style.left = (x - 20) + 'px';
    span.style.top = (y - 20) + 'px';
    span.textContent = '+' + clickValue;
    document.body.appendChild(span);
    setTimeout(() => {
      span.remove();
    }, 1500);
  }

  // --- Obs≈Çuga event√≥w losowych ---
  const eventBox = document.getElementById('eventBox');

  function startRandomEvent() {
    if(eventActive) return;
    const rand = Math.random();
    if(rand < 0.01) { // 1% szans na event
      eventActive = true;
      eventMultiplier = 2;
      showEvent('Wydarzenie: Podw√≥jne ciastka przez 10 sekund!');
      setTimeout(() => {
        eventMultiplier = 1;
        eventActive = false;
        hideEvent();
      }, 10000);
    }
  }

  function showEvent(message) {
    eventBox.textContent = message;
    eventBox.classList.add('show');
  }

  function hideEvent() {
    eventBox.classList.remove('show');
  }

  // --- Sprawdzanie osiƒÖgniƒôƒá ---
  const achievementsList = document.getElementById('achievementsList');

  function checkAchievements() {
    let changed = false;
    achievements.forEach(ach => {
      if(!ach.unlocked && ach.condition()) {
        ach.unlocked = true;
        changed = true;
        showEvent(`OsiƒÖgniƒôcie odblokowane: ${ach.name}!`);
      }
    });
    if(changed) renderAchievements();
  }

  function renderAchievements() {
    achievementsList.innerHTML = '';
    achievements.forEach(ach => {
      const div = document.createElement('div');
      div.className = 'achievement' + (ach.unlocked ? ' unlocked' : '');
      div.textContent = ach.name + (ach.unlocked ? ' ‚úì' : '');
      achievementsList.appendChild(div);
    });
  }

  function generateRandomName() {
    const firstParts = ['Z≈Çota', 'S≈Çodka', 'Stara', 'Nowa', 'Tajemnicza', 'Kosmiczna', 'Wiejska', 'Miodowa', 'Magiczna', 'Puchata'];
    const secondParts = ['Piekarnia', 'Cukiernia', 'Ciastkarnia', 'Pracownia', 'Manufaktura', 'Wypiekarnia', 'S≈Çodko≈õci', 'Chlebo≈ºeria'];
    const suffixes = ['Babci Basi', 'u Krzysia', 'Oli', 'Julki', 'z Galaktyki', 'Marze≈Ñ', 'z Lasu', 'Pawoxa', 'z Przysz≈Ço≈õci'];

    const first = firstParts[Math.floor(Math.random() * firstParts.length)];
    const second = secondParts[Math.floor(Math.random() * secondParts.length)];
    const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];

    return `${first} ${second} ${suffix}`;
  }

  function setBakeryName(name) {
    bakeryOwnerEl.textContent = name;
  }

  bakeryNameEl.addEventListener('click', () => {
    const newName = prompt('Podaj nazwƒô swojej piekarni:');
    if (newName && newName.trim()) {
      setBakeryName(newName.trim());
    }
  });

  // Obs≈Çuga zmiany g≈Ço≈õno≈õci
  volumeControl.addEventListener('input', () => {
    backgroundMusic.volume = volumeControl.value;
  });

  // Obs≈Çuga wyciszenia
  muteButton.addEventListener('click', () => {
    if (backgroundMusic.muted) {
      backgroundMusic.muted = false;
      muteButton.textContent = 'Wycisz muzykƒô';
    } else {
      backgroundMusic.muted = true;
      muteButton.textContent = 'Odcisz muzykƒô';
    }
  });
  
  // --- Pƒôtla gry ---
  setInterval(() => {
    addCookiesPerSecond();
    startRandomEvent();
  }, 100);
  
  setInterval(() => {
    playTimeSeconds++;
    updateDisplay();
  }, 1000);

  // --- Inicjalizacja ---
  renderUpgrades();
  updateDisplay();
  renderAchievements();
  setBakeryName(generateRandomName());

</script>
</body>
</html>